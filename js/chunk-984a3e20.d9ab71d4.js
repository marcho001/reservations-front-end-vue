(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-984a3e20"],{"03d9":function(e,t,a){},"1a6a":function(e,t,a){"use strict";var s=a("03d9"),r=a.n(s);r.a},"21ce":function(e,t,a){},3050:function(e,t,a){"use strict";var s=a("c037"),r=a.n(s);r.a},"386d":function(e,t,a){},"6aed":function(e,t,a){},"80d2":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticClass:"space-40"}),a("div",{staticClass:"member_wrapper"},[a("UserNavTab",{attrs:{tabs:e.tabs}}),a("div",{staticClass:"wrapper"},[e.isLoading?a("Spinner"):a("transition",{attrs:{name:"changePage"}},["info"===e.nowPage?a("MemberInfo",{attrs:{user:e.userInfo}}):"orders"===e.nowPage?a("MemberHistoryOrder",{attrs:{orders:e.orders,"user-id":e.currentUser.id}}):a("EditMemberInfo",{attrs:{"init-user":e.currentUser},on:{"after-edit-user":e.afterEditUser}})],1)],1)],1)])},r=[],n=(a("b0c0"),a("96cf"),a("1da1")),i=a("5530"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order"},[a("h1",{staticClass:"text-center"},[e._v("我的訂單")]),a("div",{staticClass:"space-40"}),a("div",{staticClass:"category"},[a("div",{staticClass:"category_wrapper d-flex justify-content-around"},[a("router-link",{staticClass:"category_wrapper_item m-2",attrs:{to:{name:"member",params:{id:e.userId,name:"orders"},query:{type:"coming"}}}},[e._v(" 即將到來 ")]),a("router-link",{staticClass:"category_wrapper_item m-2",attrs:{to:{name:"member",params:{id:e.userId,name:"orders"},query:{type:"history"}}}},[e._v(" 歷史訂單 ")]),a("router-link",{staticClass:"category_wrapper_item m-2",attrs:{to:{name:"member",params:{id:e.userId,name:"orders"},query:{type:"unpaid"}}}},[e._v(" 未付款訂單 ")])],1)]),a("hr"),a("div",{staticClass:"order"},e._l(e.orders,(function(t){return a("div",{key:t.id,staticClass:"item p-2 my-4"},[a("div",{staticClass:"item_title d-flex justify-content-between"},[a("div",[a("h2",{staticClass:"mb-2"},[e._v(" "+e._s(t.restaurantName)+" ")]),a("p",[e._v("編號：hiahifhiehaisehiashef")])]),a("p",{staticClass:"align-self-end"},[e._v(" "+e._s(t.status)+" ")])]),a("hr"),a("div",{staticClass:"item_detail"},[e._l(t.OrderItems,(function(t){return a("ul",{key:t.id,staticClass:"bill_list_item d-flex align-items-center my-2"},[a("li",{staticClass:"name text-center m-1"},[e._v(e._s(t.name))]),a("li",{staticClass:"m-1"},[e._v("x"+e._s(t.quantity))]),a("li",{staticClass:"border mx-3"}),a("li",{staticClass:"m-1"},[e._v("$ "+e._s(t.price))])])})),a("h3",{staticClass:"text-right"},[e._v("總計： $"+e._s(t.totalPrice))])],2),a("hr"),a("div",{staticClass:"item_footer d-flex justify-content-around"},[a("div",{staticClass:"m-2"},[e._v(" 預約日期："),a("span",[e._v(e._s(t.date))])]),a("div",{staticClass:"m-2"},[e._v(" 預約時間："),a("span",[e._v(e._s(t.time))])]),e._m(0,!0)])])})),0)])},c=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"m-2"},[e._v("付款方式："),a("span",[e._v("信用卡")])])}],m=(a("a9e3"),{props:{orders:Array,userId:Number}}),u=m,l=(a("afa3"),a("2877")),d=Object(l["a"])(u,o,c,!1,null,"441e13fe",null),p=d.exports,f=a("d5f8"),v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("form",{staticClass:"info m-6",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit(t)}}},[a("label",{staticClass:"info_item image position-relative",attrs:{for:"image"}},[a("img",{attrs:{src:e._f("unknownPerson")(e.user.avatar)}}),a("p",{staticClass:"image_icon text-center cursor-pointer"},[a("font-awesome-icon",{attrs:{icon:e.solidIcon.faCameraRetro}})],1)]),a("input",{staticClass:"d-none",attrs:{name:"avatar",type:"file",id:"image"},on:{change:e.handleChange}}),a("div",{staticClass:"info_item"},[a("label",{attrs:{for:"name"}},[e._v("名字：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],attrs:{type:"text",name:"name",id:"name"},domProps:{value:e.user.name},on:{input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value)}}})]),a("div",{staticClass:"info_item"},[a("label",{attrs:{for:"phone"}},[e._v("電話：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.phone,expression:"user.phone"}],attrs:{type:"tel",name:"phone",id:"phone"},domProps:{value:e.user.phone},on:{input:function(t){t.target.composing||e.$set(e.user,"phone",t.target.value)}}})]),a("div",{staticClass:"info_item"},[a("label",{attrs:{for:"email"}},[e._v("電子信箱：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],attrs:{type:"email",name:"email",id:"email"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}})]),a("div",{staticClass:"info_item"},[a("label",{attrs:{for:"password"}},[e._v("密碼：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],attrs:{type:"password",name:"password",id:"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),a("div",{staticClass:"info_item"},[a("label",{attrs:{for:"checkPassword"}},[e._v("確認密碼：")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user.checkPassword,expression:"user.checkPassword"}],attrs:{type:"password",name:"checkPassword",id:"checkPassword"},domProps:{value:e.user.checkPassword},on:{input:function(t){t.target.composing||e.$set(e.user,"checkPassword",t.target.value)}}})]),e._m(0)])},_=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"d-flex justify-content-center"},[a("button",{staticClass:"info_save mt-2",attrs:{type:"submit"}},[e._v(" 儲存 ")])])}],b=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("5bb2")),h=a("ac0d"),w={props:{initUser:Object},components:{FontAwesomeIcon:b["a"]},data:function(){return{solidIcon:b["c"],user:Object(i["a"])(Object(i["a"])({},this.initUser),{},{password:"",checkPassword:""})}},methods:{handleChange:function(e){var t=e.target.files;if(0!==t.length){var a=window.URL.createObjectURL(t[0]);this.user.avatar=a}},handleSubmit:function(e){var t=e.target,a=new FormData(t);this.$emit("after-edit-user",a)}},watch:{initUser:function(){this.user=Object(i["a"])(Object(i["a"])({},this.user),this.initUser)}},mixins:[h["a"]]},g=w,C=(a("fd95"),Object(l["a"])(g,v,_,!1,null,"3340576c",null)),x=C.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"member"},[a("div",{staticClass:"member_info d-flex align-items-center"},[a("img",{attrs:{src:e._f("unknownPerson")(e.user.avatar)}}),a("div",{staticClass:"member_info_detail ml-6"},[a("p",{staticClass:"my-2"},[e._v("會員名稱 : "+e._s(e.user.name))]),a("p",{staticClass:"my-2"},[e._v("電話： "+e._s(e.user.phone))]),a("p",{staticClass:"my-2"},[e._v("電子信箱："+e._s(e.user.email))])])]),a("div",{staticClass:"space-40"}),a("hr"),a("div",{staticClass:"space-40"}),a("div",{staticClass:"content d-flex flex-column"},[a("div",{staticClass:"member_news mb-4"},[a("h2",{staticClass:"text-center mb-2"},[e._v("最新消息")]),a("div",{staticClass:"member_news_wrapper scroll"},[a("router-link",{attrs:{to:""}},[a("div",{staticClass:"item m-2 p-2"},[a("div",{staticClass:"item_title d-flex mb-2"},[a("h3",[e._v("龍蝦吃到飽")]),a("span",{staticClass:"ml-2"},[e._v("rating")]),a("span",{staticClass:"ml-2"},[e._v("category")])]),a("p",[e._v(" 來吃不用錢來吃不用錢 來吃不用錢 來吃不用錢 ")])])])],1)]),a("div",{staticClass:"member_follow"},[a("h2",{staticClass:"text-center mb-2"},[e._v("追蹤清單")]),a("div",{staticClass:"member_follow_wrapper scroll"},[a("router-link",{attrs:{to:""}},[a("div",{staticClass:"item m-2 p-2"},[a("div",{staticClass:"title d-flex mb-2"},[a("h3",[e._v("龍蝦吃到飽")]),a("span",{staticClass:"ml-2"},[e._v("rating")]),a("span",{staticClass:"ml-2"},[e._v("category")])]),a("p",[e._v("地址：")]),a("p",[e._v("電話：")]),a("p",[e._v("營業時間：")])])])],1)])])])},k=[],O={props:{user:Object},mixins:[h["a"]]},j=O,P=(a("1a6a"),Object(l["a"])(j,y,k,!1,null,"43822036",null)),U=P.exports,I=a("2375"),N=a("2fa3"),$=(a("25f0"),{getOrders:function(e){var t=e.type,a=new URLSearchParams({type:t});return N["c"].get("/member/orders?".concat(a.toString()))},putEditUser:function(e){return N["c"].put("/member/edit",e)},getUserInfo:function(){return N["c"].get("/member/info")}}),E=a("2f62"),R={components:{UserNavTab:f["a"],MemberHistoryOrder:p,EditMemberInfo:x,MemberInfo:U,Spinner:I["a"]},data:function(){return{nowPage:"orders",tabs:[{name:"會員總覽",pathName:"member",paramsName:"info"},{name:"所有訂單",pathName:"member",paramsName:"orders"},{name:"修改會員資料",pathName:"member",paramsName:"edit"}],orders:[],userInfo:{},isLoading:!0}},computed:Object(i["a"])({},Object(E["b"])(["currentUser"])),methods:{fetchOrders:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,$.getOrders({type:e});case 3:if(s=a.sent,r=s.data,n=s.statusText,"error"!==n){a.next=8;break}throw new Error;case 8:t.orders=r.orders,t.isLoading=!1,a.next=17;break;case 12:a.prev=12,a.t0=a["catch"](0),console.error(a.t0),N["b"].fire({icon:"error",title:"無法取得訂單資料，請稍後再試！"}),t.isLoading=!1;case 17:case"end":return a.stop()}}),a,null,[[0,12]])})))()},afterEditUser:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,$.putEditUser(e);case 3:if(a=t.sent,s=a.data,"success"===s.status){t.next=7;break}throw new Error(s.message);case 7:N["b"].fire({icon:"success",title:"成功更新資料"}),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),console.error(t.t0),N["b"].fire({icon:"error",title:"無法更新使用者資料"});case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))()},fetchUserInfo:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,$.getUserInfo();case 3:if(a=t.sent,s=a.data,r=a.statusText,"error"!==r){t.next=8;break}throw new Error;case 8:e.userInfo=Object(i["a"])({},s.user),e.isLoading=!1,t.next=17;break;case 12:t.prev=12,t.t0=t["catch"](0),console.error(t.t0),N["b"].fire({icon:"error",title:"無法取得資料，請稍後再試"}),e.isLoading=!1;case 17:case"end":return t.stop()}}),t,null,[[0,12]])})))()}},created:function(){this.nowPage=this.$route.params.name;var e=this.$route.query.type,t=void 0===e?"coming":e;this.fetchOrders(t),this.fetchUserInfo()},beforeRouteUpdate:function(e,t,a){if(this.nowPage=e.params.name,"orders"===e.params.name){var s=e.query.type,r=void 0===s?"coming":s;this.fetchOrders(r)}else"info"===e.params.name&&this.fetchUserInfo();a()}},L=R,q=(a("3050"),Object(l["a"])(L,s,r,!1,null,"0626607e",null));t["default"]=q.exports},ac0d:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var s={filters:{emptyImage:function(e){return e||"https://via.placeholder.com/350x220/DFDFDF?text=No+Image"},unknownPerson:function(e){return e||"https://upload.wikimedia.org/wikipedia/en/e/ee/Unknown-person.gif"}}}},afa3:function(e,t,a){"use strict";var s=a("6aed"),r=a.n(s);r.a},beb6:function(e,t,a){"use strict";var s=a("386d"),r=a.n(s);r.a},c037:function(e,t,a){},d5f8:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"navbar"},[a("div",{staticClass:"navbar_wrapper d-flex align-items-center justify-content-around"},e._l(e.tabs,(function(t,s){return a("router-link",{key:s,staticClass:"navbar_wrapper_item",attrs:{to:{name:t.pathName,params:{id:e.currentUser.id,name:t.paramsName}}}},[e._v(" "+e._s(t.name)+" ")])})),1)])},r=[],n=a("5530"),i=a("2f62"),o={props:{tabs:{type:Array}},computed:Object(n["a"])({},Object(i["b"])(["currentUser"]))},c=o,m=(a("beb6"),a("2877")),u=Object(m["a"])(c,s,r,!1,null,"0afa0d58",null);t["a"]=u.exports},fd95:function(e,t,a){"use strict";var s=a("21ce"),r=a.n(s);r.a}}]);
//# sourceMappingURL=chunk-984a3e20.d9ab71d4.js.map